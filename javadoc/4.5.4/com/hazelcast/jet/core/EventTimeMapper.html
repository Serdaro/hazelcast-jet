<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (14) on Fri Dec 09 08:59:11 CET 2022 -->
<title>EventTimeMapper (hazelcast-jet-distribution 4.5.4 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2022-12-09">
<meta name="description" content="declaration: package: com.hazelcast.jet.core, class: EventTimeMapper">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/EventTimeMapper.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.hazelcast.jet.core</a></div>
<h1 title="Class EventTimeMapper" class="title">Class EventTimeMapper&lt;T&gt;</h1>
</div>
<div class="contentContainer">
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">java.lang.Object</a>
<div class="inheritance">com.hazelcast.jet.core.EventTimeMapper&lt;T&gt;</div>
</div>
<section class="description">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>T</code> - the event type</dd>
</dl>
<hr>
<pre>public class <span class="typeNameLabel">EventTimeMapper&lt;T&gt;</span>
extends <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></pre>
<div class="block">A utility that helps a source emit events according to a given <a href="EventTimePolicy.html" title="class in com.hazelcast.jet.core"><code>EventTimePolicy</code></a>. Generally this class should be used if a source needs
 to emit <a href="Watermark.html" title="class in com.hazelcast.jet.core"><code>watermarks</code></a>. The mapper deals with the
 following concerns:

 <h4>1. Reading partition by partition</h4>

 Upon restart it can happen that partition <em>P1</em> has one very
 recent event and <em>P2</em> has an old one. If we poll <em>P1</em>
 first and emit its recent event, it will advance the watermark. When we
 poll <em>P2</em> later on, its event will be behind the watermark and
 can be dropped as late. This utility tracks the event timestamps for
 each source partition individually and allows the processor to emit the
 watermark that is correct with respect to all the partitions.

 <h4>2. Some partition having no data</h4>

 It can happen that some partition does not have any events at all while
 others do, or the processor doesn't get any external partitions assigned
 to it. If we simply wait for the timestamps in all partitions to advance
 to some point, we won't be emitting any watermarks. This utility
 supports the <em>idle timeout</em>: if there's no new data from a
 partition after the timeout elapses, it will be marked as <em>idle</em>,
 allowing the processor's watermark to advance as if that partition
 didn't exist. If all partitions are idle or there are no partitions, the
 processor will emit a special <em>idle message</em> and the downstream
 will exclude this processor from watermark coalescing.

 <h4>3. Wrapping of events</h4>

 Events may need to be wrapped with the extracted timestamp if <a href="EventTimePolicy.html#wrapFn()"><code>EventTimePolicy.wrapFn()</code></a> is set.

 <h4>4. Throttling of Watermarks</h4>

 Watermarks are only consumed by windowing operations and emitting
 watermarks more frequently than the given <a href="EventTimePolicy.html#watermarkThrottlingFrameSize()"><code>EventTimePolicy.watermarkThrottlingFrameSize()</code></a> is wasteful since they
 are broadcast to all processors. The mapper ensures that watermarks are
 emitted according to the throttling frame size.

 <h3>Usage</h3>

 The API is designed to be used as a flat-mapping step in the <a href="../Traverser.html" title="interface in com.hazelcast.jet"><code>Traverser</code></a> that holds the output data. Your source can follow this
 pattern:

 <pre><code>
 public boolean complete() {
     if (traverser == null) {
         List&lt;Record&gt; records = poll();
         if (records.isEmpty()) {
             traverser = eventTimeMapper.flatMapIdle();
         } else {
             traverser = traverseIterable(records)
                 .flatMap(event -&gt; eventTimeMapper.flatMapEvent(
                      event, event.getPartition()));
         }
         traverser = traverser.onFirstNull(() -&gt; traverser = null);
     }
     emitFromTraverser(traverser, event -&gt; {
         if (!(event instanceof Watermark)) {
             // store your offset after event was emitted
             offsetsMap.put(event.getPartition(), event.getOffset());
         }
     });
     return false;
 }
 </code></pre>

 Other methods:
 <ul><li>
     Call <a href="#addPartitions(int)"><code>addPartitions(int)</code></a> and <a href="#removePartition(int)"><code>removePartition(int)</code></a> to change your
     partition count initially or whenever the count changes.
 <li>
     If you support state snapshots, save the value returned by <a href="#getWatermark(int)"><code>getWatermark(int)</code></a> for all partitions to the snapshot. When restoring the
     state, call <a href="#restoreWatermark(int,long)"><code>restoreWatermark(int, long)</code></a>.
     <br>
     You should save the value under your external partition key so that the
     watermark value can be restored to correct processor instance. The key
     should also be wrapped using <a href="BroadcastKey.html#broadcastKey(K)"><code>broadcastKey()</code></a>, because the external partitions don't match Hazelcast
     partitions. This way, all processor instances will see all keys and they
     can restore the partitions they handle and ignore others.
 </ul></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.0</dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<li class="blockList">
<section class="fieldSummary"><a id="field.summary">
<!--   -->
</a>
<h2>Field Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Field</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#NO_NATIVE_TIME">NO_NATIVE_TIME</a></span></code></th>
<td class="colLast">
<div class="block">Value to use as the <code>nativeEventTime</code> argument when calling
 <a href="#flatMapEvent(T,int,long)"><code>flatMapEvent(Object, int, long)</code></a> when there's no native event
 time to supply.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li class="blockList">
<section class="constructorSummary"><a id="constructor.summary">
<!--   -->
</a>
<h2>Constructor Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Constructor</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<th class="colConstructorName" scope="row"><code><span class="memberNameLink"><a href="#%3Cinit%3E(com.hazelcast.jet.core.EventTimePolicy)">EventTimeMapper</a></span>&#8203;(<a href="EventTimePolicy.html" title="class in com.hazelcast.jet.core">EventTimePolicy</a>&lt;? super <a href="EventTimeMapper.html" title="type parameter in EventTimeMapper">T</a>&gt;&nbsp;eventTimePolicy)</code></th>
<td class="colLast">
<div class="block">The partition count is initially set to 0, call <a href="#addPartitions(int)"><code>addPartitions(int)</code></a>
 to add partitions.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t4" class="tableTab" onclick="show(8);">Concrete Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#addPartitions(int)">addPartitions</a></span>&#8203;(int&nbsp;addedCount)</code></th>
<td class="colLast">
<div class="block">Adds <code>addedCount</code> partitions.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code><a href="../Traverser.html" title="interface in com.hazelcast.jet">Traverser</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flatMapEvent(long,T,int,long)">flatMapEvent</a></span>&#8203;(long&nbsp;now,
<a href="EventTimeMapper.html" title="type parameter in EventTimeMapper">T</a>&nbsp;event,
int&nbsp;partitionIndex,
long&nbsp;nativeEventTime)</code></th>
<td class="colLast">
<div class="block">A lower-level variant of <code>#flatMapEvent(T, int, long)</code> that
 accepts an explicit result of a <code>System.nanoTime()</code> call.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code><a href="../Traverser.html" title="interface in com.hazelcast.jet">Traverser</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flatMapEvent(T,int,long)">flatMapEvent</a></span>&#8203;(<a href="EventTimeMapper.html" title="type parameter in EventTimeMapper">T</a>&nbsp;event,
int&nbsp;partitionIndex,
long&nbsp;nativeEventTime)</code></th>
<td class="colLast">
<div class="block">Flat-maps the given <code>event</code> by (possibly) prepending it with a
 watermark.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code><a href="../Traverser.html" title="interface in com.hazelcast.jet">Traverser</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#flatMapIdle()">flatMapIdle</a></span>()</code></th>
<td class="colLast">
<div class="block">Call this method when there is no event to emit.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>long</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#getWatermark(int)">getWatermark</a></span>&#8203;(int&nbsp;partitionIndex)</code></th>
<td class="colLast">
<div class="block">Watermark value to be saved to state snapshot for the given source
 partition index.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>int</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#partitionCount()">partitionCount</a></span>()</code></th>
<td class="colLast">
<div class="block">Returns the current partition count.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code><a href="../Traverser.html" title="interface in com.hazelcast.jet">Traverser</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#removePartition(int)">removePartition</a></span>&#8203;(int&nbsp;partitionIndex)</code></th>
<td class="colLast">
<div class="block">Removes a partition that will no longer have events.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restoreWatermark(int,long)">restoreWatermark</a></span>&#8203;(int&nbsp;partitionIndex,
long&nbsp;wm)</code></th>
<td class="colLast">
<div class="block">Restore watermark value from state snapshot.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inheritedList">
<h3>Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a></h3>
<a id="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang" class="externalLink">clone</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang" class="externalLink">equals</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang" class="externalLink">finalize</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang" class="externalLink">getClass</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang" class="externalLink">hashCode</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang" class="externalLink">notify</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang" class="externalLink">notifyAll</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang" class="externalLink">toString</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang" class="externalLink">wait</a>, <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait(long,int)" title="class or interface in java.lang" class="externalLink">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<li class="blockList">
<section class="fieldDetails"><a id="field.detail">
<!--   -->
</a>
<h2>Field Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="NO_NATIVE_TIME">NO_NATIVE_TIME</a></h3>
<div class="memberSignature"><span class="modifiers">public static final</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">NO_NATIVE_TIME</span></div>
<div class="block">Value to use as the <code>nativeEventTime</code> argument when calling
 <a href="#flatMapEvent(T,int,long)"><code>flatMapEvent(Object, int, long)</code></a> when there's no native event
 time to supply.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.hazelcast.jet.core.EventTimeMapper.NO_NATIVE_TIME">Constant Field Values</a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li class="blockList">
<section class="constructorDetails"><a id="constructor.detail">
<!--   -->
</a>
<h2>Constructor Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="&lt;init&gt;(com.hazelcast.jet.core.EventTimePolicy)">EventTimeMapper</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="memberName">EventTimeMapper</span>&#8203;(<span class="arguments"><a href="EventTimePolicy.html" title="class in com.hazelcast.jet.core">EventTimePolicy</a>&lt;? super <a href="EventTimeMapper.html" title="type parameter in EventTimeMapper">T</a>&gt;&nbsp;eventTimePolicy)</span></div>
<div class="block">The partition count is initially set to 0, call <a href="#addPartitions(int)"><code>addPartitions(int)</code></a>
 to add partitions.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>eventTimePolicy</code> - event time policy as passed in <a href="../pipeline/Sources.html#streamFromProcessorWithWatermarks(java.lang.String,boolean,com.hazelcast.function.FunctionEx)"><code>Sources.streamFromProcessorWithWatermarks(java.lang.String, boolean, com.hazelcast.function.FunctionEx&lt;com.hazelcast.jet.core.EventTimePolicy&lt;? super T&gt;, com.hazelcast.jet.core.ProcessorMetaSupplier&gt;)</code></a></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="flatMapEvent(java.lang.Object,int,long)">
<!--   -->
</a><a id="flatMapEvent(T,int,long)">flatMapEvent</a></h3>
<div class="memberSignature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
</span><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../Traverser.html" title="interface in com.hazelcast.jet">Traverser</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;</span>&nbsp;<span class="memberName">flatMapEvent</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nullable</a>
<a href="EventTimeMapper.html" title="type parameter in EventTimeMapper">T</a>&nbsp;event,
int&nbsp;partitionIndex,
long&nbsp;nativeEventTime)</span></div>
<div class="block">Flat-maps the given <code>event</code> by (possibly) prepending it with a
 watermark. Designed to use when emitting from traverser:
 <pre><code>
     Traverser t = traverserIterable(...)
         .flatMap(event -&gt; eventTimeMapper.flatMapEvent(
                 event, event.getPartition(), nativeEventTime));
 </code></pre></div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>event</code> - the event to flat-map.
                        If <code>null</code>, it's equivalent to the behavior of <a href="#flatMapIdle()"><code>flatMapIdle()</code></a></dd>
<dd><code>partitionIndex</code> - the source partition index the event came from</dd>
<dd><code>nativeEventTime</code> - native event time in case no <code>timestampFn</code> was supplied or
                        <a href="#NO_NATIVE_TIME"><code>NO_NATIVE_TIME</code></a> if the event has no native timestamp</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>a traverser over the given event and the watermark (if it was due)</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="flatMapIdle()">flatMapIdle</a></h3>
<div class="memberSignature"><span class="annotations"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
</span><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../Traverser.html" title="interface in com.hazelcast.jet">Traverser</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;</span>&nbsp;<span class="memberName">flatMapIdle</span>()</div>
<div class="block">Call this method when there is no event to emit. It returns a traverser
 over the watermark, if it was due.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="flatMapEvent(long,java.lang.Object,int,long)">
<!--   -->
</a><a id="flatMapEvent(long,T,int,long)">flatMapEvent</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../Traverser.html" title="interface in com.hazelcast.jet">Traverser</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;</span>&nbsp;<span class="memberName">flatMapEvent</span>&#8203;(<span class="arguments">long&nbsp;now,
<a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nullable.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nullable</a>
<a href="EventTimeMapper.html" title="type parameter in EventTimeMapper">T</a>&nbsp;event,
int&nbsp;partitionIndex,
long&nbsp;nativeEventTime)</span></div>
<div class="block">A lower-level variant of <code>#flatMapEvent(T, int, long)</code> that
 accepts an explicit result of a <code>System.nanoTime()</code> call. Use this
 variant if you're calling it in a hot loop, in order to avoid repeating
 the expensive <code>System.nanoTime()</code> call.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="addPartitions(int)">addPartitions</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">addPartitions</span>&#8203;(<span class="arguments">int&nbsp;addedCount)</span></div>
<div class="block">Adds <code>addedCount</code> partitions. Added partitions will be initially
 considered <em>active</em> and having watermark value equal to the last
 emitted watermark. Their indices will follow current highest index.
 <p>
 You can call this method whenever new partitions are detected.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>addedCount</code> - number of added partitions, must be >= 0</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="removePartition(int)">removePartition</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType"><a href="../Traverser.html" title="interface in com.hazelcast.jet">Traverser</a>&lt;<a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang" class="externalLink">Object</a>&gt;</span>&nbsp;<span class="memberName">removePartition</span>&#8203;(<span class="arguments">int&nbsp;partitionIndex)</span></div>
<div class="block">Removes a partition that will no longer have events. If we were waiting
 for a watermark from it, the returned traverser might contain a
 watermark to emit.
 <p>
 Note that the indexes of partitions with index larger than the given
 <code>partitionIndex</code> will be decremented by 1.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionIndex</code> - the index of the removed partition</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="partitionCount()">partitionCount</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">int</span>&nbsp;<span class="memberName">partitionCount</span>()</div>
<div class="block">Returns the current partition count.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="getWatermark(int)">getWatermark</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">long</span>&nbsp;<span class="memberName">getWatermark</span>&#8203;(<span class="arguments">int&nbsp;partitionIndex)</span></div>
<div class="block">Watermark value to be saved to state snapshot for the given source
 partition index. The returned value should be <a href="#restoreWatermark(int,long)"><code>restored</code></a> to a processor handling the same
 partition after restart.
 <p>
 Method is meant to be used from <a href="Processor.html#saveToSnapshot()"><code>Processor.saveToSnapshot()</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionIndex</code> - 0-based source partition index.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A value to save to state snapshot</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="restoreWatermark(int,long)">restoreWatermark</a></h3>
<div class="memberSignature"><span class="modifiers">public</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">restoreWatermark</span>&#8203;(<span class="arguments">int&nbsp;partitionIndex,
long&nbsp;wm)</span></div>
<div class="block">Restore watermark value from state snapshot.
 <p>
 Method is meant to be used from <a href="Processor.html#restoreFromSnapshot(com.hazelcast.jet.core.Inbox)"><code>Processor.restoreFromSnapshot(Inbox)</code></a>.
 <p>
 See <a href="#getWatermark(int)"><code>getWatermark(int)</code></a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>partitionIndex</code> - 0-based source partition index.</dd>
<dd><code>wm</code> - watermark value to restore</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/EventTimeMapper.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2022 <a href="http://www.hazelcast.com/">Hazelcast, Inc.</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
