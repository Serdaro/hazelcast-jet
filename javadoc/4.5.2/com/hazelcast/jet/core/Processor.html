<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (14) on Thu Dec 16 14:05:17 CET 2021 -->
<title>Processor (hazelcast-jet-distribution 4.5.2 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-12-16">
<meta name="description" content="declaration: package: com.hazelcast.jet.core, interface: Processor">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip/dist/jszip.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils.min.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../../../../script-dir/jszip-utils/dist/jszip-utils-ie.min.js"></script>
<![endif]-->
<script type="text/javascript" src="../../../../script-dir/jquery-3.4.1.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.js"></script>
</head>
<body class="class-declaration">
<script type="text/javascript">var data = {"i0":18,"i1":18,"i2":18,"i3":18,"i4":18,"i5":18,"i6":18,"i7":18,"i8":18,"i9":18,"i10":18,"i11":18,"i12":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"],16:["t5","Default Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flexBox">
<header role="banner" class="flexHeader">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a id="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Processor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="navListSearch"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="skipNav"><a id="skip.navbar.top">
<!--   -->
</a></div>
</nav>
</header>
<div class="flexContent">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle"><span class="packageLabelInType">Package</span>&nbsp;<a href="package-summary.html">com.hazelcast.jet.core</a></div>
<h1 title="Interface Processor" class="title">Interface Processor</h1>
</div>
<div class="contentContainer">
<section class="description">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><code><a href="AbstractProcessor.html" title="class in com.hazelcast.jet.core">AbstractProcessor</a></code>, <code><a href="../pipeline/test/LongStreamSourceP.html" title="class in com.hazelcast.jet.pipeline.test">LongStreamSourceP</a></code>, <code><a href="../pipeline/test/ParallelBatchP.html" title="class in com.hazelcast.jet.pipeline.test">ParallelBatchP</a></code>, <code><a href="../pipeline/test/ParallelStreamP.html" title="class in com.hazelcast.jet.pipeline.test">ParallelStreamP</a></code></dd>
</dl>
<hr>
<pre>public interface <span class="typeNameLabel">Processor</span></pre>
<div class="block">When Jet executes a DAG, it creates one or more instances of <code>
 Processor</code> on each cluster member to do the work of a given vertex. The
 vertex's <code>localParallelism</code> property controls the number of
 processors per member.
 <p>
 The processor is a single-threaded processing unit that performs the
 computation needed to transform zero or more input data streams into
 zero or more output streams. Each input/output stream corresponds to
 an edge on the vertex. The correspondence between a stream and an
 edge is established via the edge's <em>ordinal</em>.
 <p>
 The special case of zero input streams applies to a <em>source</em>
 vertex, which gets its data from the environment. The special case of
 zero output streams applies to a <em>sink</em> vertex, which pushes its
 data to the environment.
 <p>
 The processor accepts input from instances of <a href="Inbox.html" title="interface in com.hazelcast.jet.core"><code>Inbox</code></a> and pushes
 its output to an instance of <a href="Outbox.html" title="interface in com.hazelcast.jet.core"><code>Outbox</code></a>.
 <p>
 See the <a href="#isCooperative()"><code>isCooperative()</code></a> for important restrictions to how the
 processor should work.

 <h3>Processing methods</h3>

 When the documentation in this class refers to <em>processing methods,</em>
 we mean all methods except for these:
 <ul>
     <li><a href="#isCooperative()"><code>isCooperative()</code></a>
     <li><a href="#init(com.hazelcast.jet.core.Outbox,com.hazelcast.jet.core.Processor.Context)"><code>init(Outbox, Context)</code></a>
     <li><a href="#close()"><code>close()</code></a>
 </ul>

 <h3>Transactional processors</h3>

 If this processor communicates with an external transactional store, after
 the snapshot is restored and before it executes any code in a <em>processing
 method</em>, it should rollback all transactions that this processor
 created. It should only rollback transactions created by this vertex and
 this job; it can use the vertex name and job ID passed to the <a href="#init(com.hazelcast.jet.core.Outbox,com.hazelcast.jet.core.Processor.Context)"><code>init(com.hazelcast.jet.core.Outbox, com.hazelcast.jet.core.Processor.Context)</code></a>
 method in the context to filter.
 <p>
 <b>Determining the list of transactions to rollback</b><br/>
 You can't store the IDs of the created transactions to the snapshot, as one
 might intuitively think. The job might run for a while after creating a
 snapshot and start a new transaction and we need to roll that one too. The
 job might even fail before it creates the first snapshot.
 <p>
 There are multiple ways to tackle this:
 <ul>
     <li>enumerate all pending transactions in the external system and
     rollback those that were created by this processor. For example, a file
     sink can list files in the directory it is writing to

     <li>if the remote system doesn't allow us to enumerate transactions,
     we can use deterministic scheme for transaction ID and probe all IDs
     that could be used by this processor. For example: <code>jobId +
     vertexId + globalProcessorIndex + sequence</code>
 </ul>

 <h3>How the methods are called</h3>

 Besides <a href="#init(com.hazelcast.jet.core.Outbox,com.hazelcast.jet.core.Processor.Context)"><code>init(com.hazelcast.jet.core.Outbox, com.hazelcast.jet.core.Processor.Context)</code></a>, <a href="#close()"><code>close()</code></a> and <a href="#isCooperative()"><code>isCooperative()</code></a> the methods
 are called in a tight loop with a possibly short back-off if the method does
 no work. "No work" is defined as adding nothing to outbox and taking nothing
 from inbox. If you do heavy work on each call (such as querying a remote
 service), you can do additional back-off: use <code>sleep</code> in a
 non-cooperative processor or do nothing if sufficient time didn't elapse.</div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>3.0</dd>
</dl>
</section>
<section class="summary">
<ul class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li class="blockList">
<section class="nestedClassSummary"><a id="nested.class.summary">
<!--   -->
</a>
<h2>Nested Class Summary</h2>
<div class="memberSummary">
<table>
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a></span></code></th>
<td class="colLast">
<div class="block">Context passed to the processor in the
 <a href="#init(com.hazelcast.jet.core.Outbox,com.hazelcast.jet.core.Processor.Context)"><code>init()</code></a> call.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li class="blockList">
<section class="methodSummary"><a id="method.summary">
<!--   -->
</a>
<h2>Method Summary</h2>
<div class="memberSummary">
<div role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="memberSummary_tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="activeTableTab">All Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="tableTab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="tableTab" onclick="show(4);">Abstract Methods</button><button role="tab" aria-selected="false" aria-controls="memberSummary_tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t5" class="tableTab" onclick="show(16);">Default Methods</button></div>
<div id="memberSummary_tabpanel" role="tabpanel">
<table aria-labelledby="t0">
<thead>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colSecond" scope="col">Method</th>
<th class="colLast" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="altColor" id="i0">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#close()">close</a></span>()</code></th>
<td class="colLast">
<div class="block">Called as the last method in the processor lifecycle.</div>
</td>
</tr>
<tr class="rowColor" id="i1">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#complete()">complete</a></span>()</code></th>
<td class="colLast">
<div class="block">Called after all the inbound edges' streams are exhausted.</div>
</td>
</tr>
<tr class="altColor" id="i2">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#completeEdge(int)">completeEdge</a></span>&#8203;(int&nbsp;ordinal)</code></th>
<td class="colLast">
<div class="block">Called after the edge input with the supplied <code>ordinal</code> is
 exhausted.</div>
</td>
</tr>
<tr class="rowColor" id="i3">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#finishSnapshotRestore()">finishSnapshotRestore</a></span>()</code></th>
<td class="colLast">
<div class="block">Called after a job was restarted from a snapshot and the processor has
 consumed all the snapshot data in <a href="#restoreFromSnapshot(com.hazelcast.jet.core.Inbox)"><code>restoreFromSnapshot(com.hazelcast.jet.core.Inbox)</code></a>.</div>
</td>
</tr>
<tr class="altColor" id="i4">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#init(com.hazelcast.jet.core.Outbox,com.hazelcast.jet.core.Processor.Context)">init</a></span>&#8203;(<a href="Outbox.html" title="interface in com.hazelcast.jet.core">Outbox</a>&nbsp;outbox,
<a href="Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>&nbsp;context)</code></th>
<td class="colLast">
<div class="block">Initializes this processor with the outbox that the <em>processing
 methods</em> must use to deposit their output items.</div>
</td>
</tr>
<tr class="rowColor" id="i5">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#isCooperative()">isCooperative</a></span>()</code></th>
<td class="colLast">
<div class="block">Tells whether this processor is able to participate in cooperative
 multithreading.</div>
</td>
</tr>
<tr class="altColor" id="i6">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#process(int,com.hazelcast.jet.core.Inbox)">process</a></span>&#8203;(int&nbsp;ordinal,
<a href="Inbox.html" title="interface in com.hazelcast.jet.core">Inbox</a>&nbsp;inbox)</code></th>
<td class="colLast">
<div class="block">Called with a batch of items retrieved from an inbound edge's stream.</div>
</td>
</tr>
<tr class="rowColor" id="i7">
<td class="colFirst"><code>default void</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#restoreFromSnapshot(com.hazelcast.jet.core.Inbox)">restoreFromSnapshot</a></span>&#8203;(<a href="Inbox.html" title="interface in com.hazelcast.jet.core">Inbox</a>&nbsp;inbox)</code></th>
<td class="colLast">
<div class="block">Called when a batch of items is received during the "restore from
 snapshot" operation.</div>
</td>
</tr>
<tr class="altColor" id="i8">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#saveToSnapshot()">saveToSnapshot</a></span>()</code></th>
<td class="colLast">
<div class="block">Stores the processor's state to a state snapshot by adding items to the
 outbox's <a href="Outbox.html#offerToSnapshot(java.lang.Object,java.lang.Object)">snapshot
 bucket</a>.</div>
</td>
</tr>
<tr class="rowColor" id="i9">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#snapshotCommitFinish(boolean)">snapshotCommitFinish</a></span>&#8203;(boolean&nbsp;success)</code></th>
<td class="colLast">
<div class="block">This is the second phase of a two-phase commit.</div>
</td>
</tr>
<tr class="altColor" id="i10">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#snapshotCommitPrepare()">snapshotCommitPrepare</a></span>()</code></th>
<td class="colLast">
<div class="block">Prepares the transactions for commit after the snapshot is completed.</div>
</td>
</tr>
<tr class="rowColor" id="i11">
<td class="colFirst"><code>default boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tryProcess()">tryProcess</a></span>()</code></th>
<td class="colLast">
<div class="block">This method will be called periodically and only when the current batch
 of items in the inbox has been exhausted.</div>
</td>
</tr>
<tr class="altColor" id="i12">
<td class="colFirst"><code>boolean</code></td>
<th class="colSecond" scope="row"><code><span class="memberNameLink"><a href="#tryProcessWatermark(com.hazelcast.jet.core.Watermark)">tryProcessWatermark</a></span>&#8203;(<a href="Watermark.html" title="class in com.hazelcast.jet.core">Watermark</a>&nbsp;watermark)</code></th>
<td class="colLast">
<div class="block">Tries to process the supplied watermark.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<li class="blockList">
<section class="methodDetails"><a id="method.detail">
<!--   -->
</a>
<h2>Method Details</h2>
<ul class="blockList">
<li class="blockList">
<section class="detail">
<h3><a id="isCooperative()">isCooperative</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">isCooperative</span>()</div>
<div class="block">Tells whether this processor is able to participate in cooperative
 multithreading. If this processor declares itself cooperative, it will
 share a thread with other cooperative processors. Otherwise it will run
 in a dedicated Java thread.
 <p>
 There are specific requirements that all <em>processing methods</em> of
 a cooperative processor must follow:
 <ul>
     <li>each call must take a reasonably small amount of time (up to a
     millisecond). Violations will manifest as increased latency due to
     slower switching of processors.

     <li>should also not attempt any blocking operations, such as I/O
     operations, waiting for locks/semaphores or sleep operations.
     Violations of this rule will manifest as less than 100% CPU usage
     under maximum load (note that this is possible for other reasons
     too, for example if the network is the bottleneck or if <a href="JetProperties.html#JET_IDLE_COOPERATIVE_MAX_MICROSECONDS">parking time</a> is
     too high). The processor must also return as soon as the outbox
     rejects an item (that is when the <a href="Outbox.html#offer(java.lang.Object)"><code>offer()</code></a> method returns <code>false</code>).
 </ul>

 Non-cooperative processors are allowed to block, but still must return
 at least once per second (that is, they should not block
 indeterminately). If they block longer, snapshots will take longer to
 complete and job will respond more slowly to termination: Jet doesn't
 interrupt the dedicated threads if it wants them to cancel, it waits for
 them to return.
 <p>
 Jet prefers cooperative processors because they result in a greater
 overall throughput. A processor should be non-cooperative only if it
 involves blocking operations, which would cause all other processors on
 the same shared thread to starve.
 <p>
 Processor instances of a single vertex are allowed to return different
 values, but a single processor instance must always return the same value.
 <p>
 The default implementation returns <code>true</code>.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="init(com.hazelcast.jet.core.Outbox,com.hazelcast.jet.core.Processor.Context)">init</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">init</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="Outbox.html" title="interface in com.hazelcast.jet.core">Outbox</a>&nbsp;outbox,
<a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="Processor.Context.html" title="interface in com.hazelcast.jet.core">Processor.Context</a>&nbsp;context)</span>
           throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></span></div>
<div class="block">Initializes this processor with the outbox that the <em>processing
 methods</em> must use to deposit their output items. This method will be
 called exactly once and strictly before any calls to other methods
 (except for the <a href="#isCooperative()"><code>isCooperative()</code></a> method.
 <p>
 Even if this processor is cooperative, this method is allowed to do
 blocking operations.
 <p>
 The default implementation does nothing.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>context</code> - useful environment information</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code></dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="process(int,com.hazelcast.jet.core.Inbox)">process</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">process</span>&#8203;(<span class="arguments">int&nbsp;ordinal,
<a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="Inbox.html" title="interface in com.hazelcast.jet.core">Inbox</a>&nbsp;inbox)</span></div>
<div class="block">Called with a batch of items retrieved from an inbound edge's stream. The
 items are in the inbox and this method may process zero or more of them,
 removing each item after it is processed. Does not remove an item until it
 is done with it.
 <p>
 If the method returns with items still present in the inbox, it will be
 called again before proceeding to call any other method (except for
 <a href="#snapshotCommitFinish(boolean)"><code>snapshotCommitFinish(boolean)</code></a>), with the same items. In other words, no
 more items are added to the inbox if the previous call didn't return an
 empty inbox.
 <p>
 There is at least one item in the inbox when this method is called.
 <p>
 The default implementation throws an exception, it is suitable for source
 processors.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ordinal</code> - ordinal of the inbound edge</dd>
<dd><code>inbox</code> - the inbox containing the pending items</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="tryProcessWatermark(com.hazelcast.jet.core.Watermark)">tryProcessWatermark</a></h3>
<div class="memberSignature"><span class="returnType">boolean</span>&nbsp;<span class="memberName">tryProcessWatermark</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="Watermark.html" title="class in com.hazelcast.jet.core">Watermark</a>&nbsp;watermark)</span></div>
<div class="block">Tries to process the supplied watermark. The value is always greater
 than in the previous call. The watermark is delivered for processing
 after it has been received from all the edges.
 <p>
 The implementation may choose to process only partially and return
 <code>false</code>, in which case it will be called again later with the same
 <code>timestamp</code> before any other <em>processing method</em> is called.
 Before the method returns <code>true</code>, it should emit the watermark to
 the downstream processors. Sink processors can ignore the watermark and
 simply return <code>true</code>.

 <h3>Caution for Jobs With the At-Least-Once Guarantee</h3>
 Jet propagates the value of the watermark by sending <em>watermark
 items</em> interleaved with the regular stream items. If a job
 configured with the <i>at-least-once</i> processing guarantee gets
 restarted, the same watermark, like any other stream item, can be
 delivered again. Therefore the processor may be asked to process
 a watermark older than the one it had already processed before the
 restart.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>watermark</code> - watermark to be processed</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if this watermark has now been processed,
         <code>false</code> to call this method again with the same watermark</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="tryProcess()">tryProcess</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">tryProcess</span>()</div>
<div class="block">This method will be called periodically and only when the current batch
 of items in the inbox has been exhausted. It can be used to produce
 output in the absence of input or to do general maintenance work. If the
 job restores state from a snapshot, this method is called for the first
 time after <a href="#finishSnapshotRestore()"><code>finishSnapshotRestore()</code></a>.
 <p>
 If the call returns <code>false</code>, it will be called again before
 proceeding to call any other <em>processing method</em>. Default
 implementation returns <code>true</code>.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="completeEdge(int)">completeEdge</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">completeEdge</span>&#8203;(<span class="arguments">int&nbsp;ordinal)</span></div>
<div class="block">Called after the edge input with the supplied <code>ordinal</code> is
 exhausted. If it returns <code>false</code>, it will be called again before
 proceeding to call any other method.
 <p>
 If this method tried to offer to the outbox and the offer call returned
 false, this method must also return false and retry the offer in the
 next call.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the processor is now done completing the edge,
         <code>false</code> to call this method again</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="complete()">complete</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">complete</span>()</div>
<div class="block">Called after all the inbound edges' streams are exhausted. If it returns
 <code>false</code>, it will be invoked again until it returns <code>true</code>.
 For example, a streaming source processor will return <code>false</code>
 forever. Unlike other methods which guarantee that no other method is
 called until they return <code>true</code>, <a href="#saveToSnapshot()"><code>saveToSnapshot()</code></a> can be
 called even though this method returned <code>false</code>.
 <p>
 After this method is called, no other processing methods are called on
 this processor, except for <a href="#snapshotCommitFinish(boolean)"><code>snapshotCommitFinish(boolean)</code></a>.
 <p>
 Non-cooperative processors are required to return from this method from
 time to time to give the system a chance to check for snapshot requests
 and job cancellation. The time the processor spends in this method affects
 the latency of snapshots and job cancellations.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if the completing step is now done, <code>false</code>
         to call this method again</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="saveToSnapshot()">saveToSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">saveToSnapshot</span>()</div>
<div class="block">Stores the processor's state to a state snapshot by adding items to the
 outbox's <a href="Outbox.html#offerToSnapshot(java.lang.Object,java.lang.Object)">snapshot
 bucket</a>. If this method returns <code>false</code>, it will be called again
 before proceeding to call any other method.
 <p>
 This method will only be called after a call to <a href="#process(int,com.hazelcast.jet.core.Inbox)"><code>process()</code></a> returns with an empty inbox. After all the input is
 exhausted, it is also called between <a href="#complete()"><code>complete()</code></a> calls. Once
 <code>complete()</code> returns <code>true</code>, this method won't be called
 anymore.
 <p>
 The default implementation does nothing and returns <code>true</code>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if this step is done, <code>false</code> to call this
      method again</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="snapshotCommitPrepare()">snapshotCommitPrepare</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">snapshotCommitPrepare</span>()</div>
<div class="block">Prepares the transactions for commit after the snapshot is completed. If
 the processor doesn't use transactions, it can just return <code>true</code>
 or rely on the no-op default implementation. This is the first phase of
 a two-phase commit.
 <p>
 This method is called right after <a href="#saveToSnapshot()"><code>saveToSnapshot()</code></a>. After
 this method returns <code>true</code>, Jet will return to call the processing
 methods again. Some time later, <a href="#snapshotCommitFinish(boolean)"><code>snapshotCommitFinish(boolean)</code></a> will be
 called.
 <p>
 When this processor communicates with an external transactional
 store, it should do the following:

 <ul>
     <li>mark the current active transaction with the external system as
     <em>prepared</em> and stop using it. The prepared transaction will
     be committed when <a href="#snapshotCommitFinish(boolean)"><code>snapshotCommitFinish(boolean)</code></a> with <code>
     commitTransactions == true</code> is called

     <li>store IDs of the pending transaction(s) to the snapshot. Note
     that there can be multiple prepared transactions if the previous
     snapshot completed with <code>commitTransactions == false</code>

     <li>optionally, start a new active transaction that will be used to
     handle input or produce output until <code>onSnapshotCompleted()</code>
     is called. If the implementation doesn't start a new active
     transaction, it can opt to not process more input or emit any output
 </ul>

 This method is skipped if the snapshot was initiated using <a href="../Job.html#exportSnapshot(java.lang.String)"><code>Job.exportSnapshot(java.lang.String)</code></a>. If this method is skipped, <a href="#snapshotCommitFinish(boolean)"><code>snapshotCommitFinish(boolean)</code></a> will be skipped too.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if this step is done, <code>false</code> to call this
      method again</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>4.0</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="snapshotCommitFinish(boolean)">snapshotCommitFinish</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">snapshotCommitFinish</span>&#8203;(<span class="arguments">boolean&nbsp;success)</span></div>
<div class="block">This is the second phase of a two-phase commit. Jet calls it after the
 snapshot was successfully saved on all other processors in the job on
 all cluster members.
 <p>
 This method can be called even when the <a href="#process(int,com.hazelcast.jet.core.Inbox)"><code>process()</code></a> method didn't process the items in the inbox. For this reason
 this method must not add any items to the outbox. It is also called
 between <a href="#complete()"><code>complete()</code></a> calls. Once <code>complete()</code> returns
 <code>true</code>, this method can still be called to finish the snapshot
 that was started before this processor completed.
 <p>
 The processor should do the following:

 <ul>
     <li>if <code>success == true</code>, it should commit the prepared
     transactions. It must not continue to use the just-committed
     transaction ID - we stored it in the latest snapshot and after
     restart we commit the transactions with IDs found in the snapshot -
     we would commit the items written after the snapshot.

     <li>if <code>success == false</code>, it should do nothing to the
     prepared transactions. If it didn't create a new active transaction
     in <a href="#saveToSnapshot()"><code>saveToSnapshot()</code></a>, it can continue to use the last active
     transaction as active.
 </ul>
 <p>
 The method is called repeatedly until it eventually returns <code>
 true</code>. No other method on this processor will be called before it
 returns <code>true</code>.

 <h4>Error handling</h4>

 The two-phase commit protocol requires that the second phase must
 eventually succeed. If you're not able to commit your transactions now,
 you should either return <code>false</code> and try again later, or you can
 throw a <a href="../RestartableException.html" title="class in com.hazelcast.jet"><code>RestartableException</code></a> to cause a job restart; the
 processor is required to commit the transactions with IDs stored in the
 state snapshot after the restart in <a href="#restoreFromSnapshot(com.hazelcast.jet.core.Inbox)"><code>restoreFromSnapshot(com.hazelcast.jet.core.Inbox)</code></a>. This
 is necessary to ensure exactly-once processing of transactional
 processors.
 <p>
 The default implementation takes no action and returns <code>true</code>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>success</code> - true, if the first snapshot phase completed successfully</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if this step is done, <code>false</code> to call this
      method again</dd>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>4.0</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="restoreFromSnapshot(com.hazelcast.jet.core.Inbox)">restoreFromSnapshot</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">restoreFromSnapshot</span>&#8203;(<span class="arguments"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html?is-external=true" title="class or interface in javax.annotation" class="externalLink">@Nonnull</a>
<a href="Inbox.html" title="interface in com.hazelcast.jet.core">Inbox</a>&nbsp;inbox)</span></div>
<div class="block">Called when a batch of items is received during the "restore from
 snapshot" operation. The type of items in the inbox is <code>
 Map.Entry</code>, key and value types are exactly as they were saved in <a href="#saveToSnapshot()"><code>saveToSnapshot()</code></a>. This method may emit items to the outbox.
 <p>
 If this method returns with items still present in the inbox, it will
 be called again before proceeding to call any other methods. No more
 items are added to the inbox if the method didn't return with an empty
 inbox. It is never called with an empty inbox. After all items are
 processed, <a href="#finishSnapshotRestore()"><code>finishSnapshotRestore()</code></a> is called.
 <p>
 If a transaction ID saved in <a href="#snapshotCommitPrepare()"><code>snapshotCommitPrepare()</code></a> is
 restored, this method should commit that transaction. If the processor
 is unable to commit those transactions, data loss or duplication might
 occur. The processor must be ready to restore a transaction ID that no
 longer exists in the remote system: either because the transaction was
 already committed (this is the most common case) or because the
 transaction timed out in the remote system. Also the job ID, if it's
 part of the transaction ID, can be different from the current job ID, if
 the job was <a href="../config/JobConfig.html#setInitialSnapshotName(java.lang.String)">started from an
 exported state</a>. These cases should be handled gracefully.
 <p>
 The default implementation throws an exception - if you emit
 something in <a href="#saveToSnapshot()"><code>saveToSnapshot()</code></a>, you must be able to handle it
 here. If you don't override <a href="#saveToSnapshot()"><code>saveToSnapshot()</code></a>, throwing an
 exception here will never happen.</div>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="finishSnapshotRestore()">finishSnapshotRestore</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">boolean</span>&nbsp;<span class="memberName">finishSnapshotRestore</span>()</div>
<div class="block">Called after a job was restarted from a snapshot and the processor has
 consumed all the snapshot data in <a href="#restoreFromSnapshot(com.hazelcast.jet.core.Inbox)"><code>restoreFromSnapshot(com.hazelcast.jet.core.Inbox)</code></a>.
 <p>
 If this method returns <code>false</code>, it will be called again before
 proceeding to call any other methods.
 <p>
 If this method tried to offer to the outbox and the offer call returned
 false, this method must also return false and retry the offer in the
 next call.
 <p>
 The default implementation takes no action and returns <code>true</code>.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd><code>true</code> if this step is done, <code>false</code> to call this
      method again</dd>
</dl>
</section>
</li>
<li class="blockList">
<section class="detail">
<h3><a id="close()">close</a></h3>
<div class="memberSignature"><span class="modifiers">default</span>&nbsp;<span class="returnType">void</span>&nbsp;<span class="memberName">close</span>()
            throws <span class="exceptions"><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></span></div>
<div class="block">Called as the last method in the processor lifecycle. It is called
 whether the job was successful or not, and strictly before <a href="ProcessorSupplier.html#close(java.lang.Throwable)"><code>ProcessorSupplier.close(java.lang.Throwable)</code></a> is called on this member. The method might get
 called even if <a href="#init(com.hazelcast.jet.core.Outbox,com.hazelcast.jet.core.Processor.Context)"><code>init(com.hazelcast.jet.core.Outbox, com.hazelcast.jet.core.Processor.Context)</code></a> method was not yet called.
 <p>
 The method will be called right after <a href="#complete()"><code>complete()</code></a> returns <code>
 true</code>, that is before the job is finished. The job might still be
 running other processors.
 <p>
 Even if this processor is cooperative, this method is allowed to do
 blocking operations.
 <p>
 If this method throws an exception, it is logged but it won't be
 reported as a job failure or cause the job to fail.
 <p>
 The default implementation does nothing.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang" class="externalLink">Exception</a></code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
</div>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a id="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a id="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/Processor.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<a id="skip.navbar.bottom">
<!--   -->
</a>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</nav>
<p class="legalCopy"><small>Copyright &#169; 2021 <a href="http://www.hazelcast.com/">Hazelcast, Inc.</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
