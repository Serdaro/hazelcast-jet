<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (15) on Tue Apr 20 14:42:57 CEST 2021 -->
<title>TenantControl (hazelcast-jet-distribution 4.5 API)</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2021-04-20">
<meta name="description" content="declaration: package: com.hazelcast.spi.tenantcontrol, interface: TenantControl">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var data = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "alt-color";
var rowColor = "row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/TenantControl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.hazelcast.spi.tenantcontrol</a></div>
<h1 title="Interface TenantControl" class="title">Interface TenantControl</h1>
</div>
<section class="description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="../../nio/serialization/DataSerializable.html" title="interface in com.hazelcast.nio.serialization">DataSerializable</a></code></dd>
</dl>
<hr>
<pre><a href="../annotation/Beta.html" title="annotation in com.hazelcast.spi.annotation">@Beta</a>
public interface <span class="type-name-label">TenantControl</span>
extends <a href="../../nio/serialization/DataSerializable.html" title="interface in com.hazelcast.nio.serialization">DataSerializable</a></pre>
<div class="block">Hooks for multi-tenancy for application servers. It captures a thread-local
 context which can then be used to re-establish the same context on different
 threads.
 <p>
 For example, an instance of tenant control can be created on an application
 thread and this tenant control can then be used to establish the same context
 on a different thread, e.g.
 <code>OperationThread</code>. Operation
 invocations requiring such context can then be handled correctly.
 <p>
 This is used by application servers to establish thread context for class loading,
 CDI, EJB and JPA invocations
 <p>
 <b>Caveats</b>
 <ul>
 <li>
     Tenant control context is captured on the application thread once the user
     interacts with distributed data structure proxies.
     In some cases, these proxies might be instantiated as a result of other,
     internal, actions such as Hot Restart, WAN replication.
     Proxies on the member-side might also be created as a consequence of the
     user creating a proxy on a client.
     In all these cases, the tenant control context is not captured correctly
     and this feature will not work as expected.
 </li>
 <li>
     When the tenant is not available, operations requiring tenant control
     should be re-enqueued for later execution.
     This only includes operations which were enqueued on the operation queue
     in the first place and does not include operations which were run directly
     on the thread running the operations, without being enqueued.
     This includes operations that are run as a consequence of another operation,
     such as a map.get blocking on a locked entry being unblocked by an unlock
     operation.
 </li>
 </ul></div>
<dl class="notes">
<dt>Author:</dt>
<dd>lprimak</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested.class.summary">
<h2>Nested Class Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Nested Classes</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Interface</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<td class="col-first"><code>static interface&nbsp;</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="TenantControl.Closeable.html" title="interface in com.hazelcast.spi.tenantcontrol">TenantControl.Closeable</a></span></code></th>
<td class="col-last">
<div class="block">Similar to the <a href="https://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html" title="class or interface in java.io" class="external-link"><code>Closeable</code></a> interface, except the <a href="TenantControl.Closeable.html#close()"><code>TenantControl.Closeable.close()</code></a>
 method does not throw a <a href="https://docs.oracle.com/javase/8/docs/api/java/io/IOException.html" title="class or interface in java.io" class="external-link"><code>IOException</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field.summary">
<h2>Field Summary</h2>
<div class="member-summary">
<table class="summary-table">
<caption><span>Fields</span></caption>
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Field</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color">
<td class="col-first"><code>static <a href="TenantControl.html" title="interface in com.hazelcast.spi.tenantcontrol">TenantControl</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#NOOP_TENANT_CONTROL">NOOP_TENANT_CONTROL</a></span></code></th>
<td class="col-last">
<div class="block">Default no-op tenant control</div>
</td>
</tr>
</tbody>
</table>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div class="member-summary" id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" id="t0" class="active-table-tab">All Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t2" class="table-tab" onclick="show(2);">Instance Methods</button><button role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" id="t3" class="table-tab" onclick="show(4);">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<table class="summary-table" aria-labelledby="t0">
<thead>
<tr>
<th class="col-first" scope="col">Modifier and Type</th>
<th class="col-second" scope="col">Method</th>
<th class="col-last" scope="col">Description</th>
</tr>
</thead>
<tbody>
<tr class="alt-color" id="i0">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#clearThreadContext()">clearThreadContext</a></span>()</code></th>
<td class="col-last">
<div class="block">Cleans up all of the thread context to avoid potential class loader leaks
 This method should clear all potential context items,
 not just the ones set up in <a href="#setTenant()"><code>setTenant()</code></a>
 This acts as a catch-all for any potential class loader and thread-local leaks.</div>
</td>
</tr>
<tr class="row-color" id="i1">
<td class="col-first"><code>boolean</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#isAvailable(com.hazelcast.spi.tenantcontrol.Tenantable)">isAvailable</a></span>&#8203;(<a href="Tenantable.html" title="interface in com.hazelcast.spi.tenantcontrol">Tenantable</a>&nbsp;tenantable)</code></th>
<td class="col-last">
<div class="block">Checks if the tenant app is loaded and classes are available for the given
 <a href="Tenantable.html" title="interface in com.hazelcast.spi.tenantcontrol"><code>Tenantable</code></a> object.</div>
</td>
</tr>
<tr class="alt-color" id="i2">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#registerObject(com.hazelcast.spi.tenantcontrol.DestroyEventContext)">registerObject</a></span>&#8203;(<a href="DestroyEventContext.html" title="interface in com.hazelcast.spi.tenantcontrol">DestroyEventContext</a>&nbsp;destroyEventContext)</code></th>
<td class="col-last">
<div class="block">Registers a hook to decouple any Hazelcast object when the tenant is destroyed,
 This is used, for example, to delete all associated caches from the application
 when it gets undeployed, so there are no <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassCastException.html" title="class or interface in java.lang" class="external-link"><code>ClassCastException</code></a> afterwards.</div>
</td>
</tr>
<tr class="row-color" id="i3">
<td class="col-first"><code><a href="TenantControl.Closeable.html" title="interface in com.hazelcast.spi.tenantcontrol">TenantControl.Closeable</a></code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#setTenant()">setTenant</a></span>()</code></th>
<td class="col-last">
<div class="block">Establish this tenant's thread-local context.</div>
</td>
</tr>
<tr class="alt-color" id="i4">
<td class="col-first"><code>void</code></td>
<th class="col-second" scope="row"><code><span class="member-name-link"><a href="#unregisterObject()">unregisterObject</a></span>()</code></th>
<td class="col-last">
<div class="block">Invoked when the distributed object belonging to this tenant control has
 been destroyed.</div>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.com.hazelcast.nio.serialization.DataSerializable">Methods inherited from interface&nbsp;com.hazelcast.nio.serialization.<a href="../../nio/serialization/DataSerializable.html" title="interface in com.hazelcast.nio.serialization">DataSerializable</a></h3>
<code><a href="../../nio/serialization/DataSerializable.html#readData(com.hazelcast.nio.ObjectDataInput)">readData</a>, <a href="../../nio/serialization/DataSerializable.html#writeData(com.hazelcast.nio.ObjectDataOutput)">writeData</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field.detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="NOOP_TENANT_CONTROL">
<h3>NOOP_TENANT_CONTROL</h3>
<div class="member-signature"><span class="modifiers">static final</span>&nbsp;<span class="return-type"><a href="TenantControl.html" title="interface in com.hazelcast.spi.tenantcontrol">TenantControl</a></span>&nbsp;<span class="member-name">NOOP_TENANT_CONTROL</span></div>
<div class="block">Default no-op tenant control</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="setTenant()">
<h3>setTenant</h3>
<div class="member-signature"><span class="return-type"><a href="TenantControl.Closeable.html" title="interface in com.hazelcast.spi.tenantcontrol">TenantControl.Closeable</a></span>&nbsp;<span class="member-name">setTenant</span>()</div>
<div class="block">Establish this tenant's thread-local context.
 The implementation can control the details of what kind of context to set
 and how to establish it.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>handle to be able to close the tenant's scope.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="registerObject(com.hazelcast.spi.tenantcontrol.DestroyEventContext)">
<h3>registerObject</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="member-name">registerObject</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html" title="class or interface in javax.annotation" class="external-link">@Nonnull</a>
<a href="DestroyEventContext.html" title="interface in com.hazelcast.spi.tenantcontrol">DestroyEventContext</a>&nbsp;destroyEventContext)</span></div>
<div class="block">Registers a hook to decouple any Hazelcast object when the tenant is destroyed,
 This is used, for example, to delete all associated caches from the application
 when it gets undeployed, so there are no <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/ClassCastException.html" title="class or interface in java.lang" class="external-link"><code>ClassCastException</code></a> afterwards.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>destroyEventContext</code> - the hook to be used by the tenant control implementation
                            Cannot be <code>null</code>. This is a functional interface, so no-op lambda
                            can be used instead.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="unregisterObject()">
<h3>unregisterObject</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="member-name">unregisterObject</span>()</div>
<div class="block">Invoked when the distributed object belonging to this tenant control has
 been destroyed. The implementation can undo whatever was done in
 <a href="#registerObject(com.hazelcast.spi.tenantcontrol.DestroyEventContext)"><code>registerObject(DestroyEventContext)</code></a>. This is so the TenantControl
 itself can be garbage collected.</div>
</section>
</li>
<li>
<section class="detail" id="isAvailable(com.hazelcast.spi.tenantcontrol.Tenantable)">
<h3>isAvailable</h3>
<div class="member-signature"><span class="return-type">boolean</span>&nbsp;<span class="member-name">isAvailable</span>&#8203;(<span class="parameters"><a href="https://docs.oracle.com/javase/8/docs/api/javax/annotation/Nonnull.html" title="class or interface in javax.annotation" class="external-link">@Nonnull</a>
<a href="Tenantable.html" title="interface in com.hazelcast.spi.tenantcontrol">Tenantable</a>&nbsp;tenantable)</span></div>
<div class="block">Checks if the tenant app is loaded and classes are available for the given
 <a href="Tenantable.html" title="interface in com.hazelcast.spi.tenantcontrol"><code>Tenantable</code></a> object.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>tenantable</code> - passed so the tenant can filter on which object is calling</dd>
<dt>Returns:</dt>
<dd><code>true</code> if tenant is loaded and classes are available</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="clearThreadContext()">
<h3>clearThreadContext</h3>
<div class="member-signature"><span class="return-type">void</span>&nbsp;<span class="member-name">clearThreadContext</span>()</div>
<div class="block">Cleans up all of the thread context to avoid potential class loader leaks
 This method should clear all potential context items,
 not just the ones set up in <a href="#setTenant()"><code>setTenant()</code></a>
 This acts as a catch-all for any potential class loader and thread-local leaks.</div>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<nav role="navigation">
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottom-nav" id="navbar.bottom">
<div class="skip-nav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.bottom.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/TenantControl.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
</div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<span class="skip-nav" id="skip.navbar.bottom">
<!--   -->
</span></nav>
<p class="legal-copy"><small>Copyright &#169; 2021 <a href="http://www.hazelcast.com/">Hazelcast, Inc.</a>. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
